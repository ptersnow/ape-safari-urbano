{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useState } from \"react\";\nimport { Heading, useToast, VStack } from \"native-base\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Input } from \"../components/Input\";\nimport { Button } from \"../components/Button\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Login() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useAuth = useAuth(),\n    signIn = _useAuth.signIn,\n    isUserLoading = _useAuth.isUserLoading;\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  var toast = useToast();\n  var navigation = useNavigation();\n  function handleUserLogin() {\n    return _regeneratorRuntime.async(function handleUserLogin$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (email.trim()) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\", toast.show({\n              title: 'Informe o seu e-mail',\n              placement: 'top',\n              bgColor: 'red.500'\n            }));\n          case 2:\n            if (password.trim()) {\n              _context.next = 4;\n              break;\n            }\n            return _context.abrupt(\"return\", toast.show({\n              title: 'Informe a sua senha',\n              placement: 'top',\n              bgColor: 'red.500'\n            }));\n          case 4:\n            try {\n              setIsLoading(true);\n              signIn(email, password);\n              toast.show({\n                title: 'Usuário logado com sucesso!',\n                placement: 'top',\n                bgColor: 'green.500'\n              });\n              setEmail('');\n              setPassword('');\n              navigation.navigate('Sidewalk');\n            } catch (error) {\n              console.log(error);\n              toast.show({\n                title: 'Não foi possível encontrar o usuário',\n                placement: 'top',\n                bgColor: 'red.500'\n              });\n            } finally {\n              setIsLoading(false);\n            }\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n  return _jsxs(VStack, {\n    flex: 1,\n    px: 8,\n    pt: 24,\n    children: [_jsx(Heading, {\n      color: \"black\",\n      fontSize: \"xl\",\n      mt: 20,\n      mb: 6,\n      children: \"Entrar\"\n    }), _jsxs(VStack, {\n      bg: \"#D2D2D2\",\n      rounded: \"2xl\",\n      space: 4,\n      w: \"full\",\n      h: \"1/3\",\n      pt: 4,\n      px: 2,\n      children: [_jsx(Input, {\n        bg: \"white\",\n        placeholder: \"E-mail\",\n        borderWidth: 1,\n        borderColor: \"black\",\n        borderRadius: \"2xl\",\n        onChangeText: setEmail,\n        value: email\n      }), _jsx(Input, {\n        bg: \"white\",\n        placeholder: \"Senha\",\n        borderWidth: 1,\n        borderColor: \"black\",\n        borderRadius: \"2xl\",\n        secureTextEntry: true,\n        mb: 3,\n        onChangeText: setPassword,\n        value: password\n      }), _jsx(Button, {\n        bg: \"black\",\n        title: \"Entrar\",\n        headingColor: \"white\",\n        w: \"full\",\n        onPress: handleUserLogin,\n        isLoading: isLoading\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["useState","Heading","useToast","VStack","useNavigation","Input","Button","useAuth","Login","email","setEmail","password","setPassword","signIn","isUserLoading","isLoading","setIsLoading","toast","navigation","handleUserLogin","trim","show","title","placement","bgColor","navigate","error","console","log"],"sources":["/home/pedro/Documentos/IFMS/projetos/ape-safari-urbano/mobile/src/screens/Login.tsx"],"sourcesContent":["import { useState } from \"react\"\nimport { Heading, useToast, VStack } from \"native-base\"\nimport { useNavigation } from \"@react-navigation/native\"\n\nimport { Input } from \"../components/Input\"\nimport { Button } from \"../components/Button\"\n\nimport { api } from \"../services/api\"\nimport { useAuth } from \"../hooks/useAuth\"\n\nexport function Login() {\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n\n    const { signIn, isUserLoading } = useAuth()\n    const [isLoading, setIsLoading] = useState(false)\n\n    const toast = useToast()\n    const navigation = useNavigation()\n\n    async function handleUserLogin() {\n        if(!email.trim()) {\n            return toast.show({\n                title: 'Informe o seu e-mail',\n                placement: 'top',\n                bgColor: 'red.500'\n            })\n        }\n\n        if(!password.trim()) {\n            return toast.show({\n                title: 'Informe a sua senha',\n                placement: 'top',\n                bgColor: 'red.500'\n            })\n        }\n\n        try {\n            setIsLoading(true)\n            signIn(email, password)\n            \n            toast.show({\n                title: 'Usuário logado com sucesso!',\n                placement: 'top',\n                bgColor: 'green.500'\n            })\n\n            setEmail('')\n            setPassword('')\n\n            navigation.navigate('Sidewalk')\n\n        } catch (error) {\n            console.log(error)\n            toast.show({\n                title: 'Não foi possível encontrar o usuário',\n                placement: 'top',\n                bgColor: 'red.500'\n            })\n        } finally {\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <VStack flex={1} px={8} pt={24}>\n\n            <Heading color=\"black\" fontSize=\"xl\" mt={20} mb={6}>\n                Entrar\n            </Heading>\n\n            <VStack\n                bg=\"#D2D2D2\"\n                rounded=\"2xl\"\n                space={4}\n                w=\"full\"\n                h=\"1/3\"\n                pt={4}\n                px={2}\n            >\n                <Input \n                    bg=\"white\"\n                    placeholder=\"E-mail\"\n                    borderWidth={1}\n                    borderColor=\"black\"\n                    borderRadius=\"2xl\"\n                    onChangeText={setEmail}\n                    value={email}\n                />\n\n                <Input \n                    bg=\"white\"\n                    placeholder=\"Senha\"\n                    borderWidth={1}\n                    borderColor=\"black\"\n                    borderRadius=\"2xl\"\n                    secureTextEntry\n                    mb={3}\n                    onChangeText={setPassword}\n                    value={password}\n                />\n\n                <Button \n                    bg=\"black\"\n                    title=\"Entrar\"\n                    headingColor=\"white\"\n                    w=\"full\"\n                    onPress={handleUserLogin}\n                    isLoading={isLoading}\n                />\n            </VStack>\n\n        </VStack>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}